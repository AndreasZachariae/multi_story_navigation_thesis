%% ==============================
\chapter{Conclusion}
\label{sec:conclusion}
%% ==============================
Questions to ask:
\begin{enumerate}
    \item What are the main contributions of the work? 
    \item How do the contributions relate to the research questions or hypotheses? 
    \item Acknowledge any limitations or weaknesses in your study and suggest areas for future research. 
    \item Describe any potential applications or implications of your research for practice, policy, or further research in your field. 
\end{enumerate}


This work seeks to answer the two research questions posed in the introduction. For better readability they are repeated here:

\begin{enumerate}
    \item How to navigate in complex multi-floor environments?
    \item How to plan paths that are straight and human-predictable?
\end{enumerate}

For both questions a concept and implementation was described in this thesis. To solve the navigation in a complex multi-floor environment, a hierarchical planner is proposed that uses a H-Graph to model any complex environment. In this graph a search is conducted that yields the optimal solution path which includes navigating between rooms, with elevators to different floors or changing the building. This hierarchical planning algorithm can be extended to a theoretically unlimited number of hierarchy levels depending on the needs of the environments. By providing a plugin for the commonly used \gls{nav_2} stack, it can be used for any mobile robot using the ROS 2 framework. A Behavior tree coordinates the actions required to perform a full multi-story navigation task. It was shown in this work that the implementation of this concept works for an complex graph modeled from the \gls{iras} research campus as well as for a two-floor hospital simulation. Three mobile robots were used in simulation to verify the interchangeability and possible application for a real robot. Finally the system was partially implemented on the PeTRA robot. Due to proprietary drivers and problems with the ROS 1 bridge, the path planning was not done with the proposed planners but with default implementations instead. The overall behavior tree of the multi-story navigation was successfully demonstarted with the real robot.

The second research question focuses on the PeTRA use-case of multi-floor service tasks in hospitals. For this environment the coexistence with human workers is a major challenge. It is required that a mobile robot does not disturb the normal daily work in the area and simultaneously follows a predictable behavior to avoid conflicts. These requirements are solved by the proposed straight path planner which provides a roadmap of deterministic paths that are close to the walls and avoids the disturbance of large public spaces. The proposed ILIR planner uses the gridmap of a room to iteratively find the largest interior rectangles. These are combined to a polygon and connected with all bridge points like doors or elevators. The created roadmap is then used to efficiently plan paths and in combination with a controller which provides collision avoidance, it can safely navigate the mobile robot to its goal. By comparing the retrieved paths on a benchmark map to different common path planners like A*, PRM and RRT, it can be shown, that the ILIR method plans paths that are generally closer to the walls, less fluctuating while being the fastest or second fastest planner depending on the benchmark room. Also on the newly introduced metric for measuring the disturbance of public space, the ILIR planner performs up to 67 percentage-points better than the second best. Furthermore through qualitative comparison to planners from related work in the field, it is shown that the paths are more straight and better predictable for humans.

%% ==============================
\section{Contributions}
\label{sec:Contributions}
%% ==============================
The goal of this thesis is to answer the research questions above while also filling a gap in the open-source community of ROS 2. Only due to the enormous work of people who make it publicly available for free, this thesis was made possible. The open-source research community plays a major role in the increasingly fast development ob robotic research and the democratization of knowledge. This thesis aims to contribute back to this ecosystem by making the implementation publicly available on GitHub (\url{https://github.com/AndreasZachariae/semantic_hierarchical_graph}). This work is licensed under a "Creative Commons Attribution-NonCommercial 4.0 International License". The main contributions of this work are summarized in the following list:

\begin{itemize}
    \item A novel hierarchical planner for multi-floor navigation in arbitrarily large environments
    \item A novel 2D planner called ILIR which is able to generate straight, deterministic and human-predictable paths.
    \item A new metric to measure the disturbance of a path on shared human-robot spaces.
    \item A quantitative analysis of different planners in respect to the proposed metric.
    \item A qualitative comparison of the proposed roadmap from ILIR with related work.
    \item A comprehensive evaluation of the proposed planner using realistic simulation scenarios.
    \item A proof-of-concept implementation of the planner on a real robot using \gls{ros_2} and \gls{bt}.
\end{itemize}

%% ==============================
\section{Future Work}
\label{sec:future_work}
%% ==============================

The future work on this topic will be conducted in improving the implementation to support dynamic map updates and efficient online replanning. As this is one of the major limitations of the current system. Another improvement would be a more efficient hierarchical search which caches the precaluated path lengths of the connections in the subgraph on each hierarchy level. This would allow for a more directed search with a heuristic like A*. The next major step would be to integrate this system on a full ROS 2-ready mobile robot like the MPO\_500. With this hardware it would be easy to demonstrate the full capability of this multi-floor navigation system in a real envirnoment. Furthermore a comprehensive benchmark environment for multi-floor scenarios is needed to test and compare methods with other researchers. This includes a generator which could randomly generate multi-floor models of complex buildings in simulation with their corresponding gridmaps. This could be used for two different steps: First, to develop a general algorithm to automatically create the complete H-Graph for a 4+ level environment. Currently this is done in related work only for two levels. Secondly, once the H-Graph is built or provided, it could be used to compare different hierarchical planners against each other. There is a lack in research for such an benchmark for evaluation. All of these advancements could bring the filed one step closer to the easy commission of large fleets of robots in a multi-floor building. Especially for service robots in hospitals in the context of the increasing number of elderly people and the shortage of trained labor, the ability to perform a wide range of service tasks over multiple floors on the whole campus is a huge benefit for the whole society.
